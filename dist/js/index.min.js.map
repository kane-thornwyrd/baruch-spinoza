{"version":3,"sources":["index.js"],"names":["conf","bookRegistryRequest","books","libLoad","libs","libKey","lib","libAttr","el","hasOwnProperty","document","createElement","baruchSpinoza","Models","Collections","Views","domReady","runCallbacks","callbacks","i","length","doc","callReady","readyCalls","isPageLoaded","pageLoaded","scrollIntervalId","clearInterval","callback","push","isTop","testDiv","isBrowser","window","addEventListener","attachEvent","frameElement","e","doScroll","external","setInterval","readyState","version","load","name","req","onLoad","config","isBuild","Book","Backbone","Model","extend","defaults","isbn","title","author","price","cover","Collection","model","BookCollection","View","tagName","render","self","this","collection","each","console","log","arguments","renderBook","book","template","_","className","initialize","listen","$el","html","toJSON","bookRegistry","url","settings","accepts","cache","dataType","ifModified","$","sideNav","addClass","hide","ajax","then","data"],"mappings":"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","file":"index.min.js","sourcesContent":["var libLoad = function libLoad(libs) {\n  for (var libKey in libs) {\n    if (libs.hasOwnProperty(libKey)) {\n      var lib = libs[libKey];\n      for (var libAttr in libs[libKey]) {\n        if (libs[libKey].hasOwnProperty(libAttr)) {}\n      }\n      var el = document.createElement(\"script\");\n    }\n  }\n};\n\nvar baruchSpinoza = {\n  \"Models\": {},\n  \"Collections\": {},\n  \"Views\": {}\n};\n\nvar domReady = function() {\n  var isTop, testDiv, scrollIntervalId, isBrowser = typeof window !== \"undefined\" && window.document, isPageLoaded = !isBrowser, doc = isBrowser ? document : null, readyCalls = [];\n  function runCallbacks(callbacks) {\n    var i;\n    for (i = 0; i < callbacks.length; i += 1) {\n      callbacks[i](doc);\n    }\n  }\n  function callReady() {\n    var callbacks = readyCalls;\n    if (isPageLoaded) {\n      if (callbacks.length) {\n        readyCalls = [];\n        runCallbacks(callbacks);\n      }\n    }\n  }\n  function pageLoaded() {\n    if (!isPageLoaded) {\n      isPageLoaded = true;\n      if (scrollIntervalId) {\n        clearInterval(scrollIntervalId);\n      }\n      callReady();\n    }\n  }\n  if (isBrowser) {\n    if (document.addEventListener) {\n      document.addEventListener(\"DOMContentLoaded\", pageLoaded, false);\n      window.addEventListener(\"load\", pageLoaded, false);\n    } else {\n      if (window.attachEvent) {\n        window.attachEvent(\"onload\", pageLoaded);\n        testDiv = document.createElement(\"div\");\n        try {\n          isTop = window.frameElement === null;\n        } catch (e) {}\n        if (testDiv.doScroll && isTop && window.external) {\n          scrollIntervalId = setInterval(function() {\n            try {\n              testDiv.doScroll();\n              pageLoaded();\n            } catch (e) {}\n          }, 30);\n        }\n      }\n    }\n    if (document.readyState === \"complete\") {\n      pageLoaded();\n    }\n  }\n  /**\r\n   * Registers a callback for DOM ready. If DOM is already ready, the\r\n   * callback is called immediately.\r\n   * @param {Function} callback\r\n   */\n  function domReady(callback) {\n    if (isPageLoaded) {\n      callback(doc);\n    } else {\n      readyCalls.push(callback);\n    }\n    return domReady;\n  }\n  domReady.version = \"2.0.1\";\n  domReady.load = function(name, req, onLoad, config) {\n    if (config.isBuild) {\n      onLoad(null);\n    } else {\n      domReady(onLoad);\n    }\n  };\n  return domReady;\n}();\n\nbaruchSpinoza.Models.Book = Backbone.Model.extend({\n  \"defaults\": {\n    \"isbn\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n    \"title\": \"default title\",\n    \"author\": \"Jeanne Catherine Rangeant\",\n    \"price\": 0,\n    \"cover\": \"http://placekitten.com/g/200/300\"\n  }\n});\n\nbaruchSpinoza.Collections.Book = Backbone.Collection.extend({\n  \"model\": baruchSpinoza.Models.Book\n});\n\nbaruchSpinoza.Views.BookCollection = Backbone.View.extend({\n  \"tagName\": \"div\",\n  \"render\": function bookCollectionViewRender() {\n    var self = this;\n    domReady(function bookCollectionViewRenderDomReady() {\n      self.collection.each(function() {\n        console.log(\"COloction: \", arguments);\n      });\n    });\n  },\n  \"renderBook\": function bookCollectionViewRenderBook(book) {\n    var bookView = new baruchSpinoza.Views.Book({\n      \"model\": book\n    });\n  }\n});\n\nbaruchSpinoza.Views.Book = Backbone.View.extend({\n  \"tagName\": \"section\",\n  \"template\": _.template('<section><img src=\"<%= cover %>\" /><h1><%= title %> - <%= author %></h1><p><em><%= price %></em><small><%= isbn %></small></p></section>'),\n  \"className\": \"book\",\n  \"initialize\": function bookViewInitialize() {\n    this.listen(this.model, \"change\", this.render);\n    this.render();\n  },\n  \"render\": function bookViewRender() {\n    var self = this;\n    self.$el.html(self.template(self.model.toJSON()));\n  }\n});\n\nvar conf = {\n  \"bookRegistry\": {\n    \"url\": \"http://henri-potier.xebia.fr/books\",\n    \"settings\": {\n      \"accepts\": [ \"text/json\" ],\n      \"cache\": false,\n      \"dataType\": \"json\",\n      \"ifModified\": true\n    }\n  }\n};\n\ndomReady(function() {\n  $(\".button-collapse\").sideNav();\n  $(\".main-loader\").addClass(\"hidden\").hide();\n});\n\nvar bookRegistryRequest = $.ajax(conf.bookRegistry.url, conf.bookRegistry.settings);\n\nvar books;\n\nbookRegistryRequest.then(function bookRegistryRequestSuccess(data, status, jqXHR) {\n  var books = new baruchSpinoza.Collections.Book(data);\n  console.log(\"BOOKS: \", books);\n}, function bookRegistryRequestFail(data, status, jqXHR) {\n  console.log(\"FAIL: \", arguments);\n});"],"sourceRoot":"/source/"}