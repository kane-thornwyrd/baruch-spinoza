var libLoad=function(e){var n,t,o,a,i,r=document.getElementsByTagName("script")[0],c=[],l=[],d=function(e){return!(void 0===e.dependOn||e.dependOn.length<=0)},s=function(t){return function(){t.loaded=!0,c.push(t.name),f(e),i(n)}},u=function(e){return void 0!==e.loaded&&e.loaded||r.parentNode.insertBefore(e.el,r),e},m=function(e){var n,t=!0;for(n=e.length-1;n>=0;n--)t=t&&!(-1===c.indexOf(e[n]));return t},f=function(e){for(var n in e)e.hasOwnProperty(n)&&d(e[n])&&m(e[n].dependOn)&&u(e[n])};for(t in e)e.hasOwnProperty(t)&&(l.push(t),o=e[t],a=document.createElement("script"),a.src=e[t].src,a.type="text/javascript",a.async="true",a.defer="true",a.onload=s(o),o.el=a,o.name=t,d(o)?m(o.dependOn)&&u(o):u(o));return i=function(e,n){void 0===n&&(n={ID:0}),m(l)&&e.call(window),clearInterval(n.ID)},function(e){var t={ID:0};n=e,t.ID=setInterval(i,100,e,t)}};libLoad({jquery:{src:"https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"},underscore:{src:"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"},backbone:{src:"https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.1/backbone-min.js",dependOn:["jquery","underscore"]},marionette:{src:"https://cdnjs.cloudflare.com/ajax/libs/backbone.marionette/2.4.2/backbone.marionette.min.js",dependOn:["backbone"]},materialize:{src:"https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js",dependOn:["jquery"]}})(function(){var e,n,t={Models:{},Collections:{},Views:{}},o=function(){function e(e){var n;for(n=0;n<e.length;n+=1)e[n](d)}function n(){var n=s;l&&n.length&&(s=[],e(n))}function t(){l||(l=!0,r&&clearInterval(r),n())}function o(e){return l?e(d):s.push(e),o}var a,i,r,c="undefined"!=typeof window&&window.document,l=!c,d=c?document:null,s=[];if(c){if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1);else if(window.attachEvent){window.attachEvent("onload",t),i=document.createElement("div");try{a=null===window.frameElement}catch(u){}i.doScroll&&a&&window.external&&(r=setInterval(function(){try{i.doScroll(),t()}catch(e){}},30))}"complete"===document.readyState&&t()}return o.version="2.0.1",o.load=function(e,n,t,a){a.isBuild?t(null):o(t)},o}();t.Models.Book=Backbone.Model.extend({defaults:{isbn:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",title:"default title",author:"Jeanne Catherine Rangeant",price:0,cover:"http://placekitten.com/g/200/300"}}),t.Collections.Book=Backbone.Collection.extend({model:t.Models.Book}),t.Views.BookCollection=Backbone.View.extend({tagName:"ul",render:function(){var e=this;o(function(){e.collection.each(function(){console.log("COloction: ",arguments)})})},renderBook:function(e){new t.Views.Book({model:e})}}),t.Views.Book=Backbone.View.extend({tagName:"section",template:_.template('<section><img src="<%= cover %>" /><h1><%= title %> - <%= author %></h1><p><em><%= price %></em><small><%= isbn %></small></p></section>'),className:"book",initialize:function(){this.listen(this.model,"change",this.render),this.render()},render:function(){var e=this;e.$el.html(e.template(e.model.toJSON()))}}),e={bookRegistry:{url:"http://henri-potier.xebia.fr/books",settings:{accepts:["text/json"],cache:!1,dataType:"json",ifModified:!0}}},o(function(){$(".button-collapse").sideNav(),$(".main-loader").addClass("hidden").hide()}),n=$.ajax(e.bookRegistry.url,e.bookRegistry.settings),n.then(function(e){var n=new t.Collections.Book(e);console.log("BOOKS: ",n)},function(){console.log("FAIL: ",arguments)})});
//# sourceMappingURL=index.min.js.map